# -*- coding: utf-8 -*-
# Generated by Django 1.11.22 on 2019-07-20 19:16
from __future__ import unicode_literals

from django.db import migrations, models


TABLE_NAME = 'form_processor_casetransaction'
INDEX_NAME = 'form_processor_casetransaction_case_id_server_date_1eaa1294_idx'
COLUMNS = ('case_id', 'server_date')

CREATE_INDEX_SQL = "CREATE INDEX CONCURRENTLY IF NOT EXISTS {} ON {} ({})".format(
    INDEX_NAME, TABLE_NAME, ','.join(COLUMNS))
DROP_INDEX_SQL = "DROP INDEX CONCURRENTLY IF EXISTS {}".format(INDEX_NAME)


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ('form_processor', '0091_auto_20190603_2023'),
    ]

    operations = [
        migrations.RunSQL(
            sql=CREATE_INDEX_SQL,
            reverse_sql=DROP_INDEX_SQL,
            state_operations=[
                migrations.AlterIndexTogether(
                    name='casetransaction',
                    index_together=set([('case', 'server_date', 'sync_log_id'), ('case', 'server_date')]),
                ),
            ]
        )
    ]
